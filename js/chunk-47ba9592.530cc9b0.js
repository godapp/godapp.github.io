(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47ba9592"],{"394e":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return b});n("55dd");var r,a,i=n("d4ec"),u=n("bee2"),s=n("99de"),c=n("7e84"),o=n("262e"),l=n("39c6"),h=n("56b9"),d=n("6b4c");(function(e){e[e["Unknown"]=0]="Unknown",e[e["RedWin"]=1]="RedWin",e[e["BlackWin"]=2]="BlackWin",e[e["LuckyStrike"]=4]="LuckyStrike"})(r||(r={})),function(e){e[e["Unknown"]=0]="Unknown",e[e["SmallPair"]=1]="SmallPair",e[e["Pair"]=2]="Pair",e[e["Straight"]=3]="Straight",e[e["Flush"]=4]="Flush",e[e["StraightFlush"]=5]="StraightFlush",e[e["ThreeOfAKind"]=6]="ThreeOfAKind"}(a||(a={}));var f=function(e){function t(e){var n;return Object(i["a"])(this,t),n=Object(s["a"])(this,Object(c["a"])(t).call(this,e)),n.status===d["b"].StandBy?(n.redCards=e.red_cards.map(function(e){return new h["a"](e,!0)}),n.blackCards=e.black_cards.map(function(e){return new h["a"](e,!0)})):(n.redCards=[],n.blackCards=[]),3===n.redCards.length&&3===n.blackCards.length?(n.redCards.sort(function(e,t){return e.value-t.value}),n.blackCards.sort(function(e,t){return e.value-t.value}),n.redHandType=n.getHandType(n.redCards),n.blackHandType=n.getHandType(n.blackCards),n.result=n.getGameResult(),n.isLuckyStrike=Math.max(n.redHandType,n.blackHandType)>=a.Pair):(n.result=r.Unknown,n.redHandType=a.Unknown,n.blackHandType=a.Unknown,n.isLuckyStrike=!1),n}return Object(o["a"])(t,e),Object(u["a"])(t,[{key:"compareForResult",value:function(e,t){return e>t?r.RedWin:t>e?r.BlackWin:r.Unknown}},{key:"getGameResult",value:function(){var e=this.compareForResult(this.redHandType,this.blackHandType);if(e===r.Unknown)switch(this.redHandType){case a.Straight:case a.StraightFlush:case a.ThreeOfAKind:e=this.compareForResult(this.redCards[1].value,this.blackCards[1].value);break;case a.SmallPair:case a.Pair:e=this.compareForResult(this.redCards[1].value,this.blackCards[1].value),e===r.Unknown&&(e=this.compareForResult(this.redCards[0].value===this.redCards[1].value?this.redCards[2].value:this.redCards[0].value,this.blackCards[0].value===this.blackCards[1].value?this.blackCards[2].value:this.blackCards[0].value));break;default:for(var t=2;t>=0;t--)if(e=this.compareForResult(this.redCards[t].value,this.blackCards[t].value),e!==r.Unknown)break}return e}},{key:"getHandType",value:function(e){for(var t=e[0].suit===e[1].suit&&e[1].suit===e[2].suit,n=!0,r=!0,i=!1,u=e[0].value,s=1;s<3;s++){var c=e[s].value;c===u?i=!0:r=!1,c-u===1||14===c&&3===u||(n=!1),u=c}return n&&2===e[0].value&&e[2].isAce()&&e.unshift(e.pop()),r?a.ThreeOfAKind:n?t?a.StraightFlush:a.Straight:t?a.Flush:i?e[1].value<9?a.SmallPair:a.Pair:a.Unknown}}]),t}(d["a"]),b=function(e){function t(e,n){return Object(i["a"])(this,t),Object(s["a"])(this,Object(c["a"])(t).call(this,e,"activegame","symbol",n))}return Object(o["a"])(t,e),Object(u["a"])(t,[{key:"convert",value:function(e){return e.map(function(e){return new f(e)})}}]),t}(l["a"])},4125:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return f});var r,a=n("bee2"),i=n("d4ec"),u=n("99de"),s=n("7e84"),c=n("262e"),o=n("39c6"),l=n("6b4c"),h=n("f370");(function(e){e[e["Unknown"]=0]="Unknown",e[e["Bet0"]=1]="Bet0",e[e["Bet1"]=2]="Bet1",e[e["Bet2"]=3]="Bet2",e[e["Bet3"]=4]="Bet3",e[e["Bet4"]=5]="Bet4",e[e["Bet5"]=6]="Bet5",e[e["Bet6"]=7]="Bet6",e[e["Bet7"]=8]="Bet7",e[e["Bet8"]=9]="Bet8",e[e["Bet9"]=10]="Bet9",e[e["Bet10"]=11]="Bet10",e[e["Bet11"]=12]="Bet11",e[e["Bet12"]=13]="Bet12",e[e["Bet13"]=14]="Bet13",e[e["Bet14"]=15]="Bet14",e[e["Bet15"]=16]="Bet15",e[e["Bet16"]=17]="Bet16",e[e["Bet17"]=18]="Bet17",e[e["Bet18"]=19]="Bet18",e[e["Bet19"]=20]="Bet19",e[e["Bet20"]=21]="Bet20",e[e["Bet21"]=22]="Bet21",e[e["Bet22"]=23]="Bet22",e[e["Bet23"]=24]="Bet23",e[e["Bet24"]=25]="Bet24",e[e["Bet25"]=26]="Bet25",e[e["Bet26"]=27]="Bet26",e[e["Bet27"]=28]="Bet27",e[e["Bet28"]=29]="Bet28",e[e["Bet29"]=30]="Bet29",e[e["Bet30"]=31]="Bet30",e[e["Bet31"]=32]="Bet31",e[e["Bet32"]=33]="Bet32",e[e["Bet33"]=34]="Bet33",e[e["Bet34"]=35]="Bet34",e[e["Bet35"]=36]="Bet35",e[e["Bet36"]=37]="Bet36",e[e["BetEven"]=38]="BetEven",e[e["BetOdd"]=39]="BetOdd",e[e["BetLarge"]=40]="BetLarge",e[e["BetSmall"]=41]="BetSmall",e[e["BetFront"]=42]="BetFront",e[e["BetMid"]=43]="BetMid",e[e["BetEnd"]=44]="BetEnd",e[e["BetLineOne"]=45]="BetLineOne",e[e["BetLineTwo"]=46]="BetLineTwo",e[e["BetLineThree"]=47]="BetLineThree",e[e["BetRed"]=48]="BetRed",e[e["BetBlack"]=49]="BetBlack"})(r||(r={}));var d=function(e){function t(e){var n;return Object(i["a"])(this,t),n=Object(u["a"])(this,Object(s["a"])(t).call(this,e)),n.result=Object(h["e"])(e)?e.result:0,n}return Object(c["a"])(t,e),t}(l["a"]),f=function(e){function t(e,n){return Object(i["a"])(this,t),Object(u["a"])(this,Object(s["a"])(t).call(this,e,"activegame","symbol",n))}return Object(c["a"])(t,e),Object(a["a"])(t,[{key:"convert",value:function(e){return e.map(function(e){return new d(e)})}}]),t}(o["a"])},"448c":function(e,t,n){"use strict";var r=n("d4ec"),a=n("bee2"),i=n("99de"),u=n("7e84"),s=n("262e"),c=n("6a63"),o=n("4125"),l=(n("7f7f"),n("292a")),h=n("015e"),d=n("5896"),f=function(e){function t(e,n){var a;return Object(r["a"])(this,t),a=Object(i["a"])(this,Object(u["a"])(t).call(this,t.contract(e.eos.network.type),e,t.ID,n)),a.gameTable=new o["c"](a.eos,a.name),a.resultTable=new d["a"](a.eos,a.name),a}return Object(s["a"])(t,e),Object(a["a"])(t,null,[{key:"contract",value:function(e){switch(e){case l["b"].KYLIN:return"godapproulet";default:return"roulette.e"}}}]),t}(h["a"]);f.ID=5,n.d(t,"a",function(){return b});var b=function(e){function t(e){var n;return Object(r["a"])(this,t),n=Object(i["a"])(this,Object(u["a"])(t).call(this,e)),n.game=new o["b"](void 0),n.betType=o["a"].Unknown,n.contract=new f(n.house,n.betToString),n}return Object(s["a"])(t,e),Object(a["a"])(t,[{key:"betToString",value:function(e){switch(e){case o["a"].BetEven:return"Even";case o["a"].BetOdd:return"Odd";case o["a"].BetLarge:return"Large";case o["a"].BetSmall:return"Small";case o["a"].BetFront:return"1st 12";case o["a"].BetMid:return"2nd 12";case o["a"].BetEnd:return"3rd 12";case o["a"].BetLineOne:return"Line 1";case o["a"].BetLineTwo:return"Line 2";case o["a"].BetLineThree:return"Line 3";default:return""+e}}},{key:"getResultString",value:function(){return"Result: "+this.game.result}}]),t}(c["a"]);b.MAX_BET_NUM=50},"48ed":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return f});n("ac4d"),n("8a81"),n("ac6a");var r,a=n("d4ec"),i=n("99de"),u=n("7e84"),s=n("bee2"),c=n("262e"),o=n("39c6"),l=n("56b9"),h=n("6b4c");(function(e){e[e["Unknown"]=0]="Unknown",e[e["BankerWin"]=1]="BankerWin",e[e["PlayerWin"]=2]="PlayerWin",e[e["Tie"]=3]="Tie",e[e["Dragon7"]=4]="Dragon7",e[e["Panda8"]=5]="Panda8"})(r||(r={}));var d=function(e){function t(e){var n;return Object(a["a"])(this,t),n=Object(i["a"])(this,Object(u["a"])(t).call(this,e)),n.status===h["b"].StandBy?(n.playerCards=e.player_cards.map(function(e){return new l["a"](e)}),n.bankerCards=e.banker_cards.map(function(e){return new l["a"](e)}),n.playerPoints=t.calculatePoint(n.playerCards),n.bankerPoints=t.calculatePoint(n.bankerCards),n.playerPoints>n.bankerPoints?8===n.playerPoints&&3===n.playerCards.length?n.result=r.Panda8:n.result=r.PlayerWin:n.bankerPoints>n.playerPoints?7===n.bankerPoints&&3===n.bankerCards.length?n.result=r.Dragon7:n.result=r.BankerWin:n.result=r.Tie):(n.playerPoints=0,n.bankerPoints=0,n.playerCards=[],n.bankerCards=[],n.result=r.Unknown),n}return Object(c["a"])(t,e),Object(s["a"])(t,null,[{key:"calculatePoint",value:function(e){var t=0,n=!0,r=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var s=i.value;s.value<10&&(t+=s.value)}}catch(c){r=!0,a=c}finally{try{n||null==u.return||u.return()}finally{if(r)throw a}}return t%10}}]),t}(h["a"]),f=function(e){function t(e,n){return Object(a["a"])(this,t),Object(i["a"])(this,Object(u["a"])(t).call(this,e,"activegame","symbol",n))}return Object(c["a"])(t,e),Object(s["a"])(t,[{key:"convert",value:function(e){return e.map(function(e){return new d(e)})}}]),t}(o["a"])},"56b9":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r,a=n("d4ec"),i=n("bee2");(function(e){e[e["Spade"]=0]="Spade",e[e["Heart"]=1]="Heart",e[e["Diamond"]=2]="Diamond",e[e["Club"]=3]="Club"})(r||(r={}));var u=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,null,[{key:"toSymbol",value:function(e){switch(e){case r.Spade:return"♠";case r.Heart:return"♥";case r.Diamond:return"♦";case r.Club:return"♣";default:throw new Error("Invalid suit")}}},{key:"toSymbolString",value:function(e){switch(e){case r.Spade:return"s";case r.Heart:return"h";case r.Diamond:return"d";case r.Club:return"c";default:throw new Error("Invalid suit")}}}]),e}(),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(a["a"])(this,e),this.raw=Math.floor(t),this.value=e.getValue(this.raw,n),this.suit=e.getSuit(this.raw)}return Object(i["a"])(e,[{key:"isAce",value:function(){return 1===this.value||14===this.value}},{key:"isFace",value:function(){return this.value>10&&this.value<=13}},{key:"getSuitSymbol",value:function(){return u.toSymbol(this.suit)}},{key:"getSuitSymbolString",value:function(){return u.toSymbolString(this.suit)}},{key:"getValueString",value:function(){return e.valueToString(this.value)}},{key:"toString",value:function(){return this.getSuitSymbol()+this.getValueString()}}],[{key:"getSuit",value:function(e){return Math.floor(e/13)%4}},{key:"getValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Math.floor(e)%13+1;return t&&1===n?14:n}},{key:"valueToString",value:function(e){return this.CARD_VALUES[(e-1)%13]}},{key:"create",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Spade,a=!1;t>13&&(a=!0,t=1);var i=13*n+t-1;return new e(i,a)}}]),e}();s.CARD_VALUES=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],s.CARDS_PER_DECK=52,s.CARDS_PER_SUIT=13,s.NUMBER_OF_SUITS=4},"62e8":function(e,t,n){"use strict";n("96cf");var r=n("1da1"),a=n("d4ec"),i=n("bee2"),u=n("99de"),s=n("7e84"),c=n("262e"),o=(n("cadf"),n("551c"),n("097d"),n("292a")),l=n("4670"),h=function(e){function t(e){return Object(a["a"])(this,t),Object(u["a"])(this,Object(s["a"])(t).call(this,e.eos.network===o["a"].KYLIN?"dapp365":"dapp365.e",e,0))}return Object(c["a"])(t,e),Object(i["a"])(t,[{key:"play",value:function(e,t){return this.transfer(e,t+",")}}]),t}(l["b"]),d=n("f370"),f=n("3797");n.d(t,"a",function(){return b});var b=function(e){function t(e){var n;return Object(a["a"])(this,t),n=Object(u["a"])(this,Object(s["a"])(t).call(this,e)),n.referer="",n.contract=new h(n.house),n}return Object(c["a"])(t,e),Object(i["a"])(t,[{key:"initialize",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.referer=Object(d["e"])(t)?t:"";case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){}},{key:"betText",value:function(){return""}},{key:"canMakeBet",value:function(){return!1}},{key:"makeBet",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Can not bet");case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(f["a"])},"77da":function(e,t,n){"use strict";n("7f7f"),n("96cf");var r=n("1da1"),a=n("bee2"),i=n("99de"),u=n("7e84"),s=n("262e"),c=n("d4ec"),o=(n("cadf"),n("551c"),n("097d"),n("55dd"),n("39c6")),l=n("bff1"),h=n("f370"),d=function(e){function t(e){var n;return Object(c["a"])(this,t),n=Object(i["a"])(this,Object(u["a"])(t).call(this,e)),Object(h["e"])(e)?(n.startTime=parseInt(e.start_time,10),n.status=e.status):(n.startTime=0,n.status=l["b"].Unknown),n}return Object(s["a"])(t,e),Object(a["a"])(t,[{key:"isActive",value:function(){return this.status===l["b"].Active}},{key:"canInsure",value:function(){return this.isActive()&&1===this.bankerCards.length&&this.bankerCards[0].isAce()}},{key:"canDouble",value:function(){return this.isActive()&&2===this.playerCards.length}}]),t}(l["a"]),f=function(e){function t(e,n){return Object(c["a"])(this,t),Object(i["a"])(this,Object(u["a"])(t).call(this,e,"games","player",n))}return Object(s["a"])(t,e),Object(a["a"])(t,[{key:"convert",value:function(e){return e.map(function(e){return new d(e)}).sort(function(e,t){return t.closeTime-e.closeTime})}}]),t}(o["a"]),b=n("47bb"),v=n("abdf"),k=n("292a"),y=function e(){Object(c["a"])(this,e)};y.NETWORK=k["a"].MAINNET;n("6b54");var m,p,g=n("6ebf"),O=function(e){function t(e){var n;return Object(c["a"])(this,t),n=Object(i["a"])(this,Object(u["a"])(t).call(this,e)),n.payout=b["a"].fromString(e.payout),n}return Object(s["a"])(t,e),Object(a["a"])(t,[{key:"getResultString",value:function(){switch(this.result){case l["c"].Surrender:return g["a"].t("bj_result_surrender");case l["c"].Lose:return this.playerPoints>l["a"].MAX_POINTS?g["a"].t("bj_result_player_busted"):g["a"].t("bj_result_banker_win");case l["c"].Push:return g["a"].t("bj_result_push");case l["c"].Win:return this.isPlayerBlackjack()?g["a"].t("bj_result_player_blackjack"):this.bankerPoints>l["a"].MAX_POINTS?g["a"].t("bj_result_banker_busted"):g["a"].t("bj_result_player_win");default:throw new Error("Invalid Game Result")}}},{key:"getResultStringLang",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(this.result){case l["c"].Surrender:return e?"玩家投降":"Surrender";case l["c"].Lose:return this.playerPoints>l["a"].MAX_POINTS?e?"玩家爆牌":"Player Busted":e?"庄家赢":"Banker Win";case l["c"].Push:return e?"平局":"Push";case l["c"].Win:return this.isPlayerBlackjack()?e?"玩家黑杰克":"Player Blackjack":this.bankerPoints>l["a"].MAX_POINTS?e?"庄家爆牌":"Banker Busted":e?"玩家赢":"Player Win";default:throw new Error(e?"无效游戏结果":"Invalid Game Result")}}},{key:"toString",value:function(){return this.getResultString().toString()+" (".concat(this.playerPoints,":").concat(this.bankerPoints,")")}},{key:"hasEOSPayout",value:function(){return this.payout.quantity>0}}]),t}(l["a"]),w=function(e){function t(e,n){return Object(c["a"])(this,t),Object(i["a"])(this,Object(u["a"])(t).call(this,e,"results","id",n))}return Object(s["a"])(t,e),Object(a["a"])(t,[{key:"convert",value:function(e){return e.map(function(e){return new O(e)}).sort(function(e,t){return t.closeTime-e.closeTime})}}]),t}(o["a"]),j=n("4670");(function(e){e[e["New"]=0]="New",e[e["Hit"]=1]="Hit",e[e["Double"]=2]="Double",e[e["Insure"]=3]="Insure",e[e["Stand"]=4]="Stand",e[e["Surrender"]=5]="Surrender"})(m||(m={})),function(e){e[e["Active"]=101]="Active"}(p||(p={}));var B=function(e){function t(e){var n;return Object(c["a"])(this,t),n=Object(i["a"])(this,Object(u["a"])(t).call(this,e.eos.network===k["a"].KYLIN?"godappblackj":"blackjack.e",e,t.ID)),n.historyTable=new w(e.eos,n.name),n.gameTable=new f(e.eos,n.name),n}return Object(s["a"])(t,e),Object(a["a"])(t,[{key:"init",value:function(){return this.pushAction("init",{})}},{key:"setGlobal",value:function(e,t){return this.pushAction("setglobal",{key:e,value:t})}},{key:"play",value:function(e,t){return this.transfer(e,m.New+","+t+",")}},{key:"hit",value:function(e){return this.playerAction(e,m.Hit)}},{key:"stand",value:function(e){return this.playerAction(e,m.Stand)}},{key:"surrender",value:function(e){return this.playerAction(e,m.Surrender)}},{key:"hardClose",value:function(e,t){return this.pushAction("hardclose",{game_id:e,reason:t})}},{key:"clearGames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9999;return this.pushAction("cleargames",{num:e})}},{key:"close",value:function(e){return this.pushAction("close",{game_id:e})}},{key:"playerAction",value:function(e,t){return this.pushAction("playeraction",{player:this.accountName(),game_id:e,action:t})}}]),t}(j["b"]);B.CONTRACT=y.NETWORK===k["a"].KYLIN?"godappblackj":"blackjack.e",B.ID=2;var S,T=n("3797");n.d(t,"a",function(){return R}),function(e){e[e["Initializing"]=0]="Initializing",e[e["NotLoading"]=1]="NotLoading",e[e["Shuffling"]=2]="Shuffling",e[e["Standing"]=3]="Standing",e[e["Hitting"]=4]="Hitting"}(S||(S={}));var R=function(e){function t(e){var n;return Object(c["a"])(this,t),n=Object(i["a"])(this,Object(u["a"])(t).call(this,e)),n.normalTicker=void 0,n.myGameTicker=void 0,n.bankCardTicker=void 0,n.gameGlobals=void 0,n.history=[],n.historyLoading=!0,n.isFirstLoad=!0,n.game=new d(void 0),n.lastId=-1,n.referer="",n.loadingStatus=S.Initializing,n.contract=new B(n.house),n}return Object(s["a"])(t,e),Object(a["a"])(t,[{key:"initialize",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.referer=Object(h["e"])(t)?t:"",this.startAllTick(),this.startGetMyGame(0);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"hasStartGame",value:function(){return this.game.id>0&&this.game.status===l["b"].Active}},{key:"destroy",value:function(){this.stopAllTick()}},{key:"loadMyGame",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.eos.loggedIn()){e.next=3;break}throw this.loadingStatus=S.NotLoading,new Error("Not logged in");case 3:return e.next=5,this.contract.gameTable.getById(this.eos.account.name);case 5:if(t=e.sent,!Object(h["e"])(t)){e.next=23;break}if((t.status!==this.game.status||t.playerCards.length!==this.game.playerCards.length)&&t.status!==l["b"].Stood&&0!==t.playerCards.length){e.next=9;break}throw new Error("Waiting for more game update");case 9:if(t.status!==l["b"].Close){e.next=18;break}if(t.id!==this.lastId){e.next=14;break}throw new Error("Waiting for more game update");case 14:this.lastId=t.id;case 15:this.isFirstLoad||this.animateBankCards(t),e.next=20;break;case 18:this.game=t,this.loadingStatus=S.NotLoading;case 20:this.isFirstLoad=!1,e.next=24;break;case 23:this.loadingStatus=S.NotLoading;case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"animateBankCards",value:function(e){var t=this;this.game.resultUpdate(e)?(Object(h["e"])(this.bankCardTicker)&&clearTimeout(this.bankCardTicker),this.bankCardTicker=setTimeout(Object(r["a"])(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:t.animateBankCards(e);case 1:case"end":return n.stop()}},n,this)})),1e3)):(this.game=e,this.loadingStatus=S.NotLoading)}},{key:"loadHistory",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.contract.historyTable.readAll();case 2:this.history=e.sent,this.historyLoading=!1;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.game=new d(void 0)}},{key:"startGetMyGame",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,a=this,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:2e3,n=i.length>1&&void 0!==i[1]?i[1]:"",Object(h["d"])(n)){e.next=5;break}return e.next=5,this.eos.waitUntilImmutable(n);case 5:this.stopGetMyGame(),this.myGameTicker=setTimeout(Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.loadMyGame();case 3:a.stopGetMyGame(),a.loadingStatus=S.NotLoading,a.betControl.finishBet(-1),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),a.startGetMyGame(500,"");case 11:case"end":return e.stop()}},e,this,[[0,8]])})),t);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"stopGetMyGame",value:function(){null!==this.myGameTicker&&(clearTimeout(this.myGameTicker),this.myGameTicker=null)}},{key:"startAllTick",value:function(){var e=this;this.stopAllTick(),this.loadHistory(),this.normalTicker=setTimeout(function(){e.startAllTick()},3e3)}},{key:"stopAllTick",value:function(){null!==this.normalTicker&&(clearTimeout(this.normalTicker),this.normalTicker=null)}},{key:"makeAction",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loadingStatus=n,e.next=4,t();case 4:return r=e.sent,this.startGetMyGame(0,r.id),e.abrupt("return",r);case 9:e.prev=9,e.t0=e["catch"](0),this.loadingStatus=S.NotLoading;case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"hit",value:function(){var e=this;return this.makeAction(function(){return e.contract.hit(e.game.id)},S.Hitting)}},{key:"stand",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.makeAction(function(){return t.contract.stand(t.game.id)},S.Standing));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"surrender",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.makeAction(function(){return t.contract.surrender(t.game.id)},S.Standing));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"isWaitingForAction",value:function(){return this.loadingStatus!==S.NotLoading}},{key:"isStanding",value:function(){return this.loadingStatus===S.Standing}},{key:"isHitting",value:function(){return this.loadingStatus===S.Hitting}},{key:"isShuffling",value:function(){return this.loadingStatus===S.Shuffling}},{key:"betText",value:function(){return"Play"}},{key:"canMakeBet",value:function(){return this.game.status!==l["b"].Active}},{key:"makeBet",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.contract.play(new b["a"](t,v["a"].EOS),this.referer);case 2:return n=e.sent,this.reset(),this.startGetMyGame(0,n.id),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(T["a"])},"90f4":function(e,t,n){"use strict";var r=n("d4ec"),a=n("bee2"),i=n("99de"),u=n("7e84"),s=n("262e"),c=(n("cadf"),n("551c"),n("097d"),n("394e")),o=n("6a63"),l=(n("7f7f"),n("292a")),h=n("015e"),d=n("5896"),f=function(e){function t(e,n){var a;return Object(r["a"])(this,t),a=Object(i["a"])(this,Object(u["a"])(t).call(this,t.contract(e.eos.network.type),e,t.ID,n)),a.gameTable=new c["c"](a.eos,a.name),a.resultTable=new d["a"](a.eos,a.name,!0),a}return Object(s["a"])(t,e),Object(a["a"])(t,null,[{key:"contract",value:function(e){switch(e){case l["b"].LOCALHOST:return"redblack";case l["b"].KYLIN:return"godappredbla";default:return"warofstar.e"}}}]),t}(h["a"]);f.ID=4,n.d(t,"a",function(){return b});var b=function(e){function t(e){var n;return Object(r["a"])(this,t),n=Object(i["a"])(this,Object(u["a"])(t).call(this,e)),n.game=new c["b"](void 0),n.betType=c["a"].Unknown,n.contract=new f(n.house,n.betToString),n}return Object(s["a"])(t,e),Object(a["a"])(t,[{key:"betToString",value:function(e){switch(e){case c["a"].RedWin:return"Red Win";case c["a"].BlackWin:return"Black Win";case c["a"].LuckyStrike:return"Lucky Strike";default:return"---"}}},{key:"handToString",value:function(e){switch(e){case c["d"].SmallPair:case c["d"].Pair:return"Pair";case c["d"].Straight:return"Straight";case c["d"].Flush:return"Flush";case c["d"].StraightFlush:return"Straight Flush";case c["d"].ThreeOfAKind:return"Three-of-a-Kind";default:return"---"}}},{key:"isRedWin",value:function(){return this.game.result===c["a"].RedWin}},{key:"isBlueWin",value:function(){return this.game.result===c["a"].BlackWin}},{key:"isLuckyStrike",value:function(){return this.game.isLuckyStrike}},{key:"getResultString",value:function(){return this.betToString(this.game.result)}},{key:"getRedHandTypeString",value:function(){return this.handToString(this.game.redHandType)}},{key:"getBlackHandTypeString",value:function(){return this.handToString(this.game.blackHandType)}}]),t}(o["a"]);b.MAX_BET_NUM=50},9124:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return b});n("ac4d"),n("8a81"),n("ac6a");var r,a=n("d4ec"),i=n("99de"),u=n("7e84"),s=n("bee2"),c=n("262e"),o=n("39c6"),l=n("56b9"),h=n("6b4c"),d=n("f370");(function(e){e[e["Unknown"]=0]="Unknown",e[e["BankerWin"]=1]="BankerWin",e[e["PlayerWin"]=2]="PlayerWin",e[e["Tie"]=4]="Tie",e[e["BankerPair"]=8]="BankerPair",e[e["PlayerPair"]=16]="PlayerPair"})(r||(r={}));var f=function(e){function t(e){var n;return Object(a["a"])(this,t),n=Object(i["a"])(this,Object(u["a"])(t).call(this,e)),n.status===h["b"].StandBy?(n.playerCards=e.player_cards.map(function(e){return new l["a"](e)}),n.bankerCards=e.banker_cards.map(function(e){return new l["a"](e)}),n.playerPoints=t.calculatePoint(n.playerCards),n.bankerPoints=t.calculatePoint(n.bankerCards),n.playerPoints>n.bankerPoints?n.result=r.PlayerWin:n.bankerPoints>n.playerPoints?n.result=r.BankerWin:n.result=r.Tie,n.bankerPair=n.isPair(n.bankerCards),n.playerPair=n.isPair(n.playerCards)):(n.playerPoints=0,n.bankerPoints=0,n.playerCards=[],n.bankerCards=[],n.bankerPair=!1,n.playerPair=!1,n.result=r.Unknown),n}return Object(c["a"])(t,e),Object(s["a"])(t,null,[{key:"calculatePoint",value:function(e){var t=0,n=!0,r=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var s=i.value;s.value<10&&(t+=s.value)}}catch(c){r=!0,a=c}finally{try{n||null==u.return||u.return()}finally{if(r)throw a}}return t%10}}]),Object(s["a"])(t,[{key:"isPair",value:function(e){return!Object(d["c"])(e)&&e[0].value===e[1].value}}]),t}(h["a"]),b=function(e){function t(e,n){return Object(a["a"])(this,t),Object(i["a"])(this,Object(u["a"])(t).call(this,e,"activegame","symbol",n))}return Object(c["a"])(t,e),Object(s["a"])(t,[{key:"convert",value:function(e){return e.map(function(e){return new f(e)})}}]),t}(o["a"])},9453:function(e,t,n){},a25e:function(e,t,n){"use strict";var r=n("d4ec"),a=n("bee2"),i=n("99de"),u=n("7e84"),s=n("262e"),c=n("48ed"),o=(n("7f7f"),n("292a")),l=n("015e"),h=n("5896"),d=function(e){function t(e,n){var a;return Object(r["a"])(this,t),a=Object(i["a"])(this,Object(u["a"])(t).call(this,t.contract(e.eos.network.type),e,t.ID,n)),a.gameTable=new c["c"](a.eos,a.name),a.resultTable=new h["a"](a.eos,a.name),a}return Object(s["a"])(t,e),Object(a["a"])(t,null,[{key:"contract",value:function(e){switch(e){case o["b"].LOCALHOST:return"baccarat";case o["b"].KYLIN:return"godappbaccar";default:return"baccarat.e"}}}]),t}(l["a"]);d.ID=3;var f=n("6a63");n.d(t,"a",function(){return b});var b=function(e){function t(e){var n;return Object(r["a"])(this,t),n=Object(i["a"])(this,Object(u["a"])(t).call(this,e)),n.game=new c["b"](void 0),n.betType=c["a"].Unknown,n.contract=new d(n.house,n.betToString),n}return Object(s["a"])(t,e),Object(a["a"])(t,[{key:"getResultString",value:function(){return this.betToString(this.game.result)}},{key:"betToString",value:function(e){switch(e){case c["a"].BankerWin:return"Banker Win";case c["a"].PlayerWin:return"Player Win";case c["a"].Tie:return"Tie";case c["a"].Panda8:return"Panda 8";case c["a"].Dragon7:return"Dragon 7";default:return""}}}]),t}(f["a"])},bff1:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return h});n("ac4d"),n("8a81"),n("ac6a"),n("c5f6"),n("6b54"),n("28a5");var r,a,i=n("d4ec"),u=n("bee2"),s=n("56b9"),c=n("47bb"),o=n("f370"),l=n("abdf");(function(e){e[e["Unknown"]=0]="Unknown",e[e["Active"]=1]="Active",e[e["Stood"]=2]="Stood",e[e["Close"]=3]="Close"})(r||(r={})),function(e){e[e["Unknown"]=0]="Unknown",e[e["Surrender"]=1]="Surrender",e[e["Win"]=2]="Win",e[e["Lose"]=3]="Lose",e[e["Push"]=4]="Push"}(a||(a={}));var h=function(){function e(t){Object(i["a"])(this,e),Object(o["e"])(t)?(this.id=t.id,this.closeTime=parseInt(t.close_time,10),this.playerCards=t.player_cards.map(function(e){return new s["a"](e)}),this.bankerCards=t.banker_cards.map(function(e){return new s["a"](e)}),this.player=t.player,this.bet=c["a"].fromString(t.bet),this.insured=t.insured,this.result=t.result,this.status=t.status,this.bankerPoints=e.calculatePoints(this.bankerCards),this.playerPoints=e.calculatePoints(this.playerCards)):(this.id=0,this.closeTime=0,this.player="",this.playerCards=[],this.bankerCards=[],this.bet=new c["a"](0,l["a"].EOS),this.insured=!1,this.result=a.Unknown,this.status=r.Unknown,this.bankerPoints=0,this.playerPoints=0)}return Object(u["a"])(e,[{key:"resultUpdate",value:function(t){if(this.playerCards.length<t.playerCards.length){for(var n=this.playerCards.length;n<t.playerCards.length;n++)this.playerCards.push(t.playerCards[n]);this.playerPoints=e.calculatePoints(this.playerCards)}return this.bankerCards.length<t.bankerCards.length&&(this.bankerCards.push(t.bankerCards[this.bankerCards.length]),this.bankerPoints=e.calculatePoints(this.bankerCards),!0)}},{key:"isBankerBusted",value:function(){return this.bankerPoints>e.MAX_POINTS}},{key:"isPlayerBusted",value:function(){return this.playerPoints>e.MAX_POINTS}},{key:"isBankerBlackjack",value:function(){return this.bankerPoints===e.MAX_POINTS&&2===this.bankerCards.length}},{key:"isPlayerBlackjack",value:function(){return this.playerPoints===e.MAX_POINTS&&2===this.playerCards.length}},{key:"getProfit",value:function(e){var t=this.bet.toString().split(" ")[0];switch(e){case 1:return new c["a"](2.5*Number(t),l["a"].EOS);case 2:return new c["a"](2*Number(t),l["a"].EOS);case 3:return new c["a"](.5*Number(t),l["a"].EOS);case 4:return this.bet;default:return new c["a"](1*Number(t),l["a"].EOS)}}},{key:"isWin",value:function(){return this.result===a.Win}},{key:"isLose",value:function(){return this.result===a.Lose}},{key:"isPush",value:function(){return this.result===a.Push}},{key:"isSurrender",value:function(){return this.result===a.Surrender}},{key:"hasResult",value:function(){return this.result!==a.Unknown&&this.status===r.Close}},{key:"canSurrender",value:function(){return 2===this.playerCards.length}}],[{key:"calculatePoints",value:function(e){var t=0,n=0,r=!0,a=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var c=u.value,o=Math.min(c.value,10);1===c.value&&n++,t+=o}}catch(h){a=!0,i=h}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}for(var l=0;l<n;l++){if(t+10>21)return t;t+=10}return t}}]),e}();h.MAX_POINTS=21},d14a:function(e,t,n){"use strict";var r=n("d4ec"),a=n("bee2"),i=n("99de"),u=n("7e84"),s=n("262e"),c=n("9124"),o=(n("7f7f"),n("cadf"),n("551c"),n("097d"),n("292a")),l=n("015e"),h=n("5896"),d=function(e){function t(e,n){var a;return Object(r["a"])(this,t),a=Object(i["a"])(this,Object(u["a"])(t).call(this,t.contract(e.eos.network.type),e,t.ID,n)),a.gameTable=new c["c"](a.eos,a.name),a.resultTable=new h["a"](a.eos,a.name,!0),a}return Object(s["a"])(t,e),Object(a["a"])(t,null,[{key:"contract",value:function(e){switch(e){case o["b"].KYLIN:return"godappcbacca";default:return"dappbaccarat"}}}]),t}(l["a"]);d.ID=6;var f=n("6a63");n.d(t,"a",function(){return b});var b=function(e){function t(e){var n;return Object(r["a"])(this,t),n=Object(i["a"])(this,Object(u["a"])(t).call(this,e)),n.game=new c["b"](void 0),n.betType=c["a"].Unknown,n.contract=new d(n.house,n.betToString),n}return Object(s["a"])(t,e),Object(a["a"])(t,[{key:"getResultString",value:function(){return this.betToString(this.game.result)+(this.game.playerPair?", Player Pair":"")+(this.game.bankerPair?", Banker Pair":"")}},{key:"betToString",value:function(e){switch(e){case c["a"].BankerWin:return"Banker Win";case c["a"].PlayerWin:return"Player Win";case c["a"].Tie:return"Tie";default:return""}}}]),t}(f["a"])},e585:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("select",{directives:[{name:"model",rawName:"v-model",value:e.current,expression:"current"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.current=t.target.multiple?n:n[0]}}},e._l(e.games,function(t){return n("option",{domProps:{value:t}},[e._v("\n            "+e._s(t.controller.contract.name)+"\n        ")])})),n("button",{on:{click:e.connect}},[e._v("Connect")]),n("br"),n("br"),e._l(e.current.actions,function(t){return n("button",{key:t.name,staticClass:"switchBtn",on:{click:function(n){e.performAction(t)}}},[e._v(e._s(t.name)+"\n    ")])}),n("div",[e._v(e._s(e.message))])],2)},a=[],i=(n("96cf"),n("1da1")),u=n("d4ec"),s=n("bee2"),c=n("99de"),o=n("7e84"),l=n("45eb"),h=n("262e"),d=(n("cadf"),n("551c"),n("097d"),n("9ab4")),f=n("60a3"),b=n("83e0"),v=n("90f4"),k=(n("7f7f"),n("abdf")),y=n("47bb"),m=function e(t,n){Object(u["a"])(this,e),this.name=t,this.action=n},p=function(){function e(t){Object(u["a"])(this,e),this.controller=t,this.actions=[],this.addAction("Tokens",function(e){return e.contract.tokens.readAll()}),this.addAction("Players",function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.contract.players.readAll();case 2:return n=e.sent,e.abrupt("return",n.map(function(e){return e.name+":"+(e.in.quantity-e.out.quantity)/1e3}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),this.addAction("Globals",function(e){return e.contract.globals.readAll()}),this.addAction("Init",function(e){return e.house.addGame(e.contract.name,e.contract.id)}),this.addAction("Activate",function(e){return e.contract.setActive(!0)}),this.addAction("Deactivate",function(e){return e.contract.setActive(!1)}),this.addAction("ResetToken",function(e){return e.house.updateToken(e.contract.name,k["a"].EOS,1e3,1e6,15e6)}),this.addAction("Deposit",function(e){return e.house.transfer(new y["a"](500,k["a"].EOS),"deposit,"+e.contract.name)})}return Object(s["a"])(e,[{key:"addAction",value:function(e,t){var n=this.controller;this.actions.push(new m(e,Object(i["a"])(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:return r=e.sent,e.abrupt("return",JSON.stringify(r));case 4:case"end":return e.stop()}},e,this)}))))}}]),e}();p.PUBLIC_KEY="EOS8UUZPji2ATfrA45GzQod5gjxXvDYZeFcg95p32PueoPsfdM8XN",p.PRIVATE_KEY="5Kart9egqapRE6bXvSEr9sAaJecWxAvzZags9B831oab7TK29w7";var g=function(e){function t(e){var n;return Object(u["a"])(this,t),n=Object(c["a"])(this,Object(o["a"])(t).call(this,e)),n.addAction("Game",function(e){return e.contract.gameTable.readAll()}),n.addAction("Results",function(e){return e.contract.resultTable.readAll()}),n.addAction("NewRound",function(e){return e.contract.newRound()}),n.addAction("SetKey",function(e){return e.house.setRandomKey(p.PUBLIC_KEY)}),n.addAction("Close",function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.contract.gameTable.readAll();case 2:return n=e.sent,e.abrupt("return",t.contract.reveal(n[0].id,t.contract.eos.signHash(n[0].seed,p.PRIVATE_KEY)));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),n}return Object(h["a"])(t,e),t}(p),O=function(e){function t(e){var n;return Object(u["a"])(this,t),n=Object(c["a"])(this,Object(o["a"])(t).call(this,e)),n.addAction("SetKey",function(e){return e.house.setRandomKey(p.PUBLIC_KEY)}),n.addAction("Resolve",function(e){return e.contract.resolveAll(p.PRIVATE_KEY)}),n}return Object(h["a"])(t,e),t}(p),w=function(e){function t(e){var n;return Object(u["a"])(this,t),n=Object(c["a"])(this,Object(o["a"])(t).call(this,e)),n.addAction("Clear",function(e){return e.contract.clearGames()}),n}return Object(h["a"])(t,e),t}(p),j=n("fa13"),B=n("77da"),S=n("a25e"),T=n("448c"),R=n("d14a"),P=n("e5b6"),A=n("62e8"),C=n("eb0e"),_=function(e){function t(){var e;return Object(u["a"])(this,t),e=Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.message="",e.games=[],e.current=new p(new j["b"](b["a"].instance)),e}return Object(h["a"])(t,e),Object(s["a"])(t,[{key:"connect",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.control.eos,!t.loggedIn()){e.next=6;break}return e.next=4,t.connector.logout();case 4:e.next=9;break;case 6:return e.next=8,t.connector.login();case 8:this.message="Hello "+t.connector.getAccount();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"performAction",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.action();case 2:this.message=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createController",value:function(e){return this.games=[new O(new j["b"](e)),new w(new B["a"](e)),new p(new C["a"](e)),new g(new S["a"](e)),new g(new R["a"](e)),new g(new v["a"](e)),new g(new T["a"](e))],this.current=this.games[0],new A["a"](e)}},{key:"mounted",value:function(){Object(l["a"])(Object(o["a"])(t.prototype),"mounted",this).call(this)}}]),t}(P["a"]);_=d["a"]([f["a"]],_);var I=_,L=I,x=(n("ea88"),n("2877")),N=Object(x["a"])(L,r,a,!1,null,"baaaf3a4",null);N.options.__file="manage.vue";t["default"]=N.exports},ea88:function(e,t,n){"use strict";var r=n("9453"),a=n.n(r);a.a},fa13:function(e,t,n){"use strict";n("ac4d"),n("8a81"),n("ac6a"),n("6b54"),n("96cf");var r=n("1da1"),a=(n("7f7f"),n("d4ec")),i=n("bee2"),u=n("99de"),s=n("7e84"),c=n("262e"),o=(n("cadf"),n("551c"),n("097d"),n("55dd"),n("39c6")),l=n("47bb"),h=n("abdf"),d=n("0769"),f=function(){function e(t){Object(a["a"])(this,e);var n=h["a"].fromSymbol(t.sym);this.id=t.id,this.betId=t.bet_id,this.player=t.player,this.betNumber=t.bet_value,this.rollNumber=t.roll_value,this.betAmount=l["a"].fromRawAmount(t.bet,n),this.payout=l["a"].fromRawAmount(t.payout,n),this.timestamp=new d["a"](t.time),this.profit=this.isWin?this.payout.minus(this.betAmount.quantity):new l["a"](0,h["a"].EOS)}return Object(i["a"])(e,[{key:"getToalProfit",value:function(){return this.payout.toString()}},{key:"isWin",get:function(){return this.payout.quantity>0}}]),e}(),b=function(e){function t(e,n){return Object(a["a"])(this,t),Object(u["a"])(this,Object(s["a"])(t).call(this,e,"games","id",n))}return Object(c["a"])(t,e),Object(i["a"])(t,[{key:"convert",value:function(e){return e.map(function(e){return new f(e)}).sort(function(e,t){return t.timestamp.value-e.timestamp.value})}}]),t}(o["a"]),v=n("292a"),k=n("4670"),y=function e(t){Object(a["a"])(this,e),this.id=t.id,this.player=t.player,this.referer=t.referer,this.betNumber=t.bet_number,this.betAsset=l["a"].fromString(t.bet_asset),this.seed=t.seed,this.timestamp=new d["a"](t.time)},m=function(e){function t(e,n){return Object(a["a"])(this,t),Object(u["a"])(this,Object(s["a"])(t).call(this,e,"activebets","id",n))}return Object(c["a"])(t,e),Object(i["a"])(t,[{key:"convert",value:function(e){return e.map(function(e){return new y(e)})}}]),t}(o["a"]),p=function(e){function t(e){var n;return Object(a["a"])(this,t),n=Object(u["a"])(this,Object(s["a"])(t).call(this,t.contract(e.eos),e,t.ID)),n.historyTable=new b(e.eos,n.name),n}return Object(c["a"])(t,e),Object(i["a"])(t,[{key:"play",value:function(e,t,n){return this.transfer(t,"".concat(e,",").concat(n,","))}},{key:"setRandomKey",value:function(e){return this.pushAction("setrandkey",{key:e})}},{key:"resove",value:function(e,t){return this.pushAction("resolve",{bet_id:e,sig:t})}},{key:"resolveAll",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i,u,s,c,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new m(this.eos,this.name).readAll();case 2:for(n=e.sent,r=!0,a=!1,i=void 0,e.prev=6,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)c=s.value,o=this.eos.signHash(c.seed,t),this.resove(c.id,o);e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),a=!0,i=e.t0;case 14:e.prev=14,e.prev=15,r||null==u.return||u.return();case 17:if(e.prev=17,!a){e.next=20;break}throw i;case 20:return e.finish(17);case 21:return e.finish(14);case 22:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21]])}));return function(t){return e.apply(this,arguments)}}()}],[{key:"contract",value:function(e){switch(e.network.type){case v["b"].LOCALHOST:return"dice";case v["b"].KYLIN:return"godappdice12";default:return"godice.e"}}}]),t}(k["b"]);p.ID=1;var g,O=n("f370"),w=n("3797");n.d(t,"a",function(){return g}),n.d(t,"b",function(){return j}),function(e){e[e["BetResult_UnKnow"]=0]="BetResult_UnKnow",e[e["BetResult_Success"]=1]="BetResult_Success",e[e["BetResult_Error"]=2]="BetResult_Error"}(g||(g={}));var j=function(e){function t(e){var n;return Object(a["a"])(this,t),n=Object(u["a"])(this,Object(s["a"])(t).call(this,e)),n.betNumber=49,n.allBetTicker=null,n.allTableLoading=!0,n.rollValue="00",n.allData=[],n.winCount=0,n.rollStartTime=0,n.referer="",n.isLoading=!1,n.showResult=!1,n.myData=[],n.betResult=g.BetResult_UnKnow,n.contract=new p(n.house),n}return Object(c["a"])(t,e),Object(i["a"])(t,[{key:"getName",value:function(){return this.eos.loggedIn()?this.eos.account.name:""}},{key:"toLogin",value:function(){this.eos.connect()}},{key:"curOdds",value:function(){return this.getOdds(this.betNumber).toFixed(2)}},{key:"curProfit",value:function(){var e=parseFloat((this.betControl.amount*this.getOdds(this.betNumber)).toFixed(2));return e=this.limitProfit(e),e}},{key:"limitProfit",value:function(e){var n=e;return n>t.MAX_PROFIT?(n=t.MAX_PROFIT,this.betControl.amount=n/this.getOdds(this.betNumber),this.betControl.amount=Math.floor(100*this.betControl.amount)/100,this.curProfit()):n}},{key:"initialize",value:function(e){this.referer=Object(O["e"])(e)?e:"",this.startTicker()}},{key:"destroy",value:function(){this.stopTicker()}},{key:"getOdds",value:function(e){return 98/e}},{key:"startTicker",value:function(){var e=this;this.stopTicker(),this.allBetTicker=setInterval(function(){e.updateAllBetTable()},3e3)}},{key:"stopTicker",value:function(){null!==this.allBetTicker&&(clearInterval(this.allBetTicker),this.allBetTicker=null)}},{key:"getTimeStamp",value:function(){var e=new Date;return Math.floor(e.getTime()/1e3)}},{key:"updateAllBetTable",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.contract.historyTable.readAll();case 2:this.allData=e.sent,this.eos.loggedIn()?(n=Object(O["c"])(this.myData)?0:this.myData[0].betId,r=this.eos.account.name,a=this.allData.filter(function(e){return e.betId>n&&e.player===r}),a.length>0&&(a=a.concat(this.myData),a.length>t.MY_HISTORY_SIZE&&a.splice(t.MY_HISTORY_SIZE),this.myData=a)):this.myData=[],this.allTableLoading=!1;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateBetResult",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.eos.waitUntilImmutable(t);case 2:this.getRollValueFromTrans();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRollValueFromTrans",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.getRollValueFromTable(this.rollStartTime),!Object(O["e"])(t)){e.next=8;break}return n=t.rollNumber,this.rollValue=n<10?"0"+n:n.toString(10),this.betControl.finishBet(t.profit.quantity),this.updateLastResult(t),e.abrupt("return");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:setTimeout(function(){r.getRollValueFromTrans()},1e3);case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"getRollValueFromTable",value:function(e){var t=this.eos.account.name,n=!0,r=!1,a=void 0;try{for(var i,u=this.allData[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var s=i.value;if(s.player===t&&s.timestamp.value>=e)return s}}catch(c){r=!0,a=c}finally{try{n||null==u.return||u.return()}finally{if(r)throw a}}}},{key:"betText",value:function(){return"Roll Under "+this.betNumber}},{key:"makeBet",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.clearResult(),this.betResult=g.BetResult_UnKnow,this.rollStartTime=this.getTimeStamp(),e.next=5,this.contract.play(this.betNumber,new l["a"](t,h["a"].EOS),this.referer);case 5:return n=e.sent,this.isLoading=!0,setTimeout(function(){n.isError?(r.isLoading=!1,r.betResult=g.BetResult_Error):(r.updateBetResult(n.id),r.betResult=g.BetResult_Success)},1500),e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"canMakeBet",value:function(){return!0}},{key:"clearResult",value:function(){this.showResult=!1,this.lastResult=void 0,this.isLoading=!1}},{key:"updateLastResult",value:function(e){this.showResult=!0,this.lastResult=e,this.winCount=e.isWin?this.winCount+1:0,this.isLoading=!1}},{key:"shouldShowResult",value:function(){return this.showResult&&Object(O["e"])(this.lastResult)}},{key:"dismissResult",value:function(){this.showResult=!1}},{key:"isWin",value:function(){return Object(O["e"])(this.lastResult)&&this.lastResult.isWin}},{key:"referralLink",value:function(e){return e+(this.eos.loggedIn()?"?ref="+this.eos.account.name:"")}},{key:"otherLink",value:function(){return[]}}]),t}(w["a"]);j.MY_HISTORY_SIZE=50,j.MAX_PROFIT=200}}]);