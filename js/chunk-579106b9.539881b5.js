(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-579106b9"],{"0769":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("d4ec"),a=n("bee2"),i=n("f370"),s=function(){function t(){Object(r["a"])(this,t)}return Object(a["a"])(t,null,[{key:"initialize",value:function(){0===new Date("1970-01-01T00:00:00").getTime()?this.ISO_SUFFIX="":0===new Date("1970-01-01T00:00:00-0000").getTime()&&(this.ISO_SUFFIX="-0000")}},{key:"toISOTimestamp",value:function(t){return new Date(t+this.ISO_SUFFIX).getTime()/1e3}}]),t}();s.ISO_SUFFIX="",s.initialize();var u=function(){function t(e){Object(r["a"])(this,t),this.str=e,Object(i["d"])(e)?this.value=0:this.value=s.toISOTimestamp(e)}return Object(a["a"])(t,[{key:"toString",value:function(){return this.str}}]),t}()},"5df2":function(t,e,n){var r=n("5ca1"),a=n("d752");r(r.S+r.F*(Number.parseFloat!=a),"Number",{parseFloat:a})},aa77:function(t,e,n){var r=n("5ca1"),a=n("be13"),i=n("79e5"),s=n("fdef"),u="["+s+"]",c="​",o=RegExp("^"+u+u+"*"),h=RegExp(u+u+"*$"),l=function(t,e,n){var a={},u=i(function(){return!!s[t]()||c[t]()!=c}),o=a[t]=u?e(f):s[t];n&&(a[n]=o),r(r.P+r.F*u,"String",a)},f=l.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(h,"")),t};t.exports=l},c5f6:function(t,e,n){"use strict";var r=n("7726"),a=n("69a8"),i=n("2d95"),s=n("5dbc"),u=n("6a99"),c=n("79e5"),o=n("9093").f,h=n("11e9").f,l=n("86cc").f,f=n("aa77").trim,v="Number",d=r[v],m=d,p=d.prototype,g=i(n("2aeb")(p))==v,b="trim"in String.prototype,y=function(t){var e=u(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():f(e,3);var n,r,a,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+e}for(var s,c=e.slice(2),o=0,h=c.length;o<h;o++)if(s=c.charCodeAt(o),s<48||s>a)return NaN;return parseInt(c,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(g?c(function(){p.valueOf.call(n)}):i(n)!=v)?s(new m(y(e)),n,d):y(e)};for(var k,O=n("9e1e")?o(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;O.length>w;w++)a(m,k=O[w])&&!a(d,k)&&l(d,k,h(m,k));d.prototype=p,p.constructor=d,n("2aba")(r,v,d)}},d752:function(t,e,n){var r=n("7726").parseFloat,a=n("aa77").trim;t.exports=1/r(n("fdef")+"-0")!==-1/0?function(t){var e=a(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},eb0e:function(t,e,n){"use strict";n("96cf");var r,a,i=n("1da1"),s=n("d4ec"),u=n("bee2"),c=n("99de"),o=n("7e84"),h=n("262e"),l=(n("cadf"),n("551c"),n("097d"),n("c5f6"),n("5df2"),n("47bb")),f=n("f370"),v=(n("f4ff"),function(){function t(e){Object(s["a"])(this,t),this.h=0;for(var n=0,r=1779033703^e.length;n<e.length;n++)this.h=Math.imul(r^e.charCodeAt(n),3432918353);this.h=this.h<<13|this.h>>>19}return Object(u["a"])(t,[{key:"seed",value:function(){return this.h=Math.imul(this.h^this.h>>>16,2246822507),this.h=Math.imul(this.h^this.h>>>13,3266489909),(this.h^=this.h>>>16)>>>0}}]),t}()),d=function(){function t(e){Object(s["a"])(this,t);var n=new v(e);this.a=n.seed(),this.b=n.seed(),this.c=n.seed(),this.d=n.seed()}return Object(u["a"])(t,[{key:"gen",value:function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var t=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,t=t+this.d|0,this.c=this.c+t|0,(t>>>0)/4294967296}},{key:"generate",value:function(t){return Math.floor(this.gen()*t)}}]),t}(),m=(n("5df3"),n("f400"),n("ac4d"),n("8a81"),n("ac6a"),function(){function t(){Object(s["a"])(this,t)}return Object(u["a"])(t,null,[{key:"contains",value:function(t,e){var n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value;if(e(u))return!0}}catch(c){r=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return!1}},{key:"toMap",value:function(t,e,n){var r=new Map;return t.forEach(function(t){return r.set(e(t),n(t))}),r}},{key:"makeRange",value:function(t,e){for(var n=[],r=0;r<t;++r)n.push(e(r));return n}},{key:"remove",value:function(t,e){if(null!==t&&null!==e){for(var n=-1,r=t.length,a=0;a<r-1;a++)t[a]===e&&(n=a);t.splice(n,1)}}},{key:"swap",value:function(t,e,n){var r=t[n];return t[n]=t[e],t[e]=r,r}}]),t}()),p=n("0769"),g=function t(e){Object(s["a"])(this,t),Object(f["e"])(e)?(this.id=e.id,this.player=e.player,this.referer=e.referer,this.seed=e.seed,this.timestamp=new p["a"](e.time)):(this.id=0,this.player="",this.referer="",this.seed="",this.timestamp=new p["a"](""))};(function(t){t[t["Unknown"]=0]="Unknown",t[t["Pending"]=1]="Pending",t[t["Revealed"]=2]="Revealed"})(r||(r={})),function(t){t[t["Hit"]=1]="Hit",t[t["Bonus"]=2]="Bonus",t[t["Miss"]=3]="Miss"}(a||(a={}));var b=function t(e,n,r,a){Object(s["a"])(this,t),this.reward=e,this.result=n,this.value=r,this.values=a},y=function(t){function e(t){var n;return Object(s["a"])(this,e),n=Object(c["a"])(this,Object(o["a"])(e).call(this,t)),n.results=[],Object(f["e"])(t)?(n.price=l["a"].fromString(t.price),n.reward=l["a"].fromString(t.reward),n.result=Number.parseFloat(t.result),n.status=0===n.result?r.Pending:r.Revealed):(n.price=l["a"].DEFAULT,n.reward=l["a"].DEFAULT,n.result=0,n.status=r.Unknown),n}return Object(h["a"])(e,t),Object(u["a"])(e,[{key:"getResults",value:function(){return 0!==this.result&&Object(f["c"])(this.results)&&(this.results=e.generateResults(this.result,this.seed)),this.results}},{key:"isActive",value:function(){return 0!==this.result}},{key:"canMakeBet",value:function(){return this.status!==r.Pending}}],[{key:"generateResults",value:function(t,n){for(var r=[],i=[],s=[],u=0;u<5;u++)s[u]=3&t,t>>=2,i[u]=15&t,t>>=4;for(var c=new d(n),o=[0,1,2,3,4],h=[1,2,3,4,5,6,7,8,9],l=0;l<5;l++){for(var f=[],v=s[l]===a.Bonus?c.generate(4):-1,p=m.swap(o,l,l+c.generate(5-l)),g=0;g<4;g++){var y=m.swap(h,g,g+c.generate(9-g));f[g]=v===g?99:10*p+y}var k=s[l]===a.Hit?f[c.generate(4)]:10*p+h[4+c.generate(5)];r[l]=new b(e.SCRATCH_TYPES[i[l]],s[l],k,f)}return r}}]),e}(g);y.SCRATCH_TYPES=[1,2,5,10,20,50,100,1e3,1e4];n("6b54"),n("7f7f");var k,O=n("292a"),w=n("4670"),j=n("39c6"),I=function(t){function e(t,n){return Object(s["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).call(this,t,"activecard","player",n))}return Object(h["a"])(e,t),Object(u["a"])(e,[{key:"convert",value:function(t){return t.map(function(t){return new y(t)})}}]),e}(j["a"]),S=n("abdf"),T=(n("55dd"),function t(e){Object(s["a"])(this,t),this.id=e.id,this.cardId=e.card_id,this.player=e.player,this.price=l["a"].fromString(e.price),this.reward=l["a"].fromString(e.reward),this.result=e.result,this.timestamp=new p["a"](e.time)}),G=function(t){function e(t,n){return Object(s["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).call(this,t,"histories","id",n))}return Object(h["a"])(e,t),Object(u["a"])(e,[{key:"convert",value:function(t){return t.map(function(t){return new T(t)}).sort(function(t,e){return e.timestamp.value-t.timestamp.value})}}]),e}(j["a"]);(function(t){t[t["Pig"]=0]="Pig"})(k||(k={}));var M,N=function(t){function e(t){var n;return Object(s["a"])(this,e),n=Object(c["a"])(this,Object(o["a"])(e).call(this,t.eos.network===O["a"].KYLIN?"godappscratc":"",t,w["a"].Scratch)),n.gameTable=new I(t.eos,n.name),n.historyTable=new G(t.eos,n.name),n}return Object(h["a"])(e,t),Object(u["a"])(e,[{key:"init",value:function(){return this.pushAction("init",{})}},{key:"setGlobal",value:function(t,e){return this.pushAction("setglobal",{key:t,value:e})}},{key:"play",value:function(t,e,n,r,a){return this.transfer(r,t+","+e+","+n+","+a)}},{key:"openCard",value:function(t,e,n){return this.pushAction("play",{player:this.eos.account.name,card_type:t,price:new l["a"](e,S["a"].EOS).toString(),referer:n})}},{key:"claim",value:function(){return this.pushAction("claim",{player:this.eos.account.name})}}]),e}(w["b"]),R=n("3797");(function(t){t[t["Initializing"]=0]="Initializing",t[t["NotLoading"]=1]="NotLoading",t[t["Loading"]=2]="Loading"})(M||(M={}));var E=function(t){function e(t){var n;return Object(s["a"])(this,e),n=Object(c["a"])(this,Object(o["a"])(e).call(this,t)),n.historyTicker=void 0,n.gameTicker=void 0,n.lastId=-1,n.referer="",n.loadingStatus=M.Initializing,n.game=n.createEmptyGame(),n.lastGame=n.createEmptyGame(),n}return Object(h["a"])(e,t),Object(u["a"])(e,[{key:"initialize",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.referer=Object(f["e"])(e)?e:"",this.startGetHistory(),this.startGetMyGame(0);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){null!==this.historyTicker&&(clearInterval(this.historyTicker),this.historyTicker=null)}},{key:"reset",value:function(){this.game=this.createEmptyGame()}},{key:"startGetMyGame",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,r=this,a=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:2e3,n=a.length>1&&void 0!==a[1]?a[1]:"",Object(f["d"])(n)){t.next=5;break}return t.next=5,this.eos.waitUntilImmutable(n);case 5:this.stopGetMyGame(),this.gameTicker=setTimeout(Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!r.eos.loggedIn()){t.next=10;break}return t.prev=1,t.next=4,r.gameTable.getById(r.eos.account.name);case 4:n=t.sent,r.game=Object(f["e"])(n)?n:r.createEmptyGame(),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](1);case 10:e=r.canFinishLoading(),e?r.loadingStatus=M.NotLoading:r.startGetMyGame(500);case 12:case"end":return t.stop()}},t,this,[[1,8]])})),e);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"stopGetMyGame",value:function(){null!==this.gameTicker&&(clearTimeout(this.gameTicker),this.gameTicker=null)}},{key:"startGetHistory",value:function(){var t=this;this.historyTicker=setInterval(function(){t.getHistory()},5e3)}},{key:"canMakeBet",value:function(){return this.loadingStatus===M.NotLoading&&this.game.canMakeBet()}},{key:"onBetMade",value:function(t){this.loadingStatus=M.Loading,this.lastGame=this.game,this.reset(),this.startGetMyGame(0,t),this.betControl.finishBet(0)}}]),e}(R["a"]);n.d(e,"a",function(){return F});var F=function(t){function e(t){var n;return Object(s["a"])(this,e),n=Object(c["a"])(this,Object(o["a"])(e).call(this,t)),n.history=[],n.contract=new N(n.house),n.gameTable=n.contract.gameTable,n}return Object(h["a"])(e,t),Object(u["a"])(e,[{key:"makeBet",value:function(t){return this.buyCards(k.Pig,t,1)}},{key:"buyCards",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.contract.play(e,1e4*n,r,new l["a"](n*r,S["a"].EOS),this.referer);case 2:return a=t.sent,this.onBetMade(a.id),t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"openCard",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.contract.openCard(e,1e4*n,this.referer);case 2:return r=t.sent,this.onBetMade(r.id),t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"canClaim",value:function(){return this.game.status===r.Revealed&&this.game.reward.quantity>0}},{key:"claim",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.contract.claim();case 2:return e=t.sent,this.loadingStatus=M.Loading,this.lastGame=this.game,this.startGetMyGame(0,e.id),t.abrupt("return",e);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"betText",value:function(){return"Get Card"}},{key:"canFinishLoading",value:function(){return this.eos.loggedIn()&&this.game.status!==r.Pending&&(this.lastGame.status!==r.Revealed||this.game.id!==this.lastGame.id)}},{key:"createEmptyGame",value:function(){return new y(void 0)}},{key:"getHistory",value:function(){var t=this;this.contract.historyTable.readAll().then(function(e){return t.history=e})}}]),e}(E)},f4ff:function(t,e,n){var r=n("5ca1"),a=Math.imul;r(r.S+r.F*n("79e5")(function(){return-5!=a(4294967295,5)||2!=a.length}),"Math",{imul:function(t,e){var n=65535,r=+t,a=+e,i=n&r,s=n&a;return 0|i*s+((n&r>>>16)*s+i*(n&a>>>16)<<16>>>0)}})},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);